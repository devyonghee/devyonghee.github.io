---
title: 이펙티브 자바 Chapter12. 직렬화
tags: [book, effective-java]
categories: book
---


이펙티브 자바 12장에서는 직렬화에 대해서 소개한다.   
객체를 바이트 스트림으로 인코딩하고 디코딩하면서 생기는 위험에 대해 최소화하는 방법을 알아본다.

<!--more-->

<br/>

## 아이템 85. 자바 직렬화의 대안을 찾으라

- **직렬화**는 공격 범위가 너무 넓어 **방어가 어려움**
  - 역 직렬화 과정에서 타입안의 모든 코드를 수행할 수 있음
  - 신뢰할 수 없는 스트림을 역직렬화하면 원격 코드 실행(RCE), 서비스 거부(DOS) 등 공격 가능
  - 위험을 피하기 위해 아무것도 **역직렬화 하지 않아야 함**
  - 새로운 시스템에서 자바 직렬화를 사용하지 않아야 함
- 자바 직렬화 위험을 회피, 다양한 플랫폼 지원, 성능 우수 등 이점이 있는 **크로스 플랫폼 구조화된 데이터 표현** 사용 추천
  - 대표적인 **크로스 플랫폼 구조화된 데이터 표현** 은 JSON 과 프로토콜 버퍼
  - **JSON** 은 **텍스트 기반**이라 읽을 수 있음
  - **프로토콜 버퍼**는 이진 표현이라 **효율이 높음**
- 직렬화가 필요하고 역직렬화가 안전한지 모른다면 **객체 역직렬화 필터링**(`java.io.ObjectInputFilter`) 사용
  - **객체 역직렬화 필터링**은 역직렬화되기 전에 **필터**를 설치하는 기능
  - 특정 클래스를 받아들이거나 거부 가능, **화이트리스트** 방식 추천 (안전하다고 알려진 클래스만 수용)

