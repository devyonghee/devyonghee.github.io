---
title: '[SQL AntiPattern] 2부 물리적 데이터베이스 설계 안티패턴'
tags: [book, sql anti pattern, database, sql]
categories: book
---

SQL 을 효과적으로 활용하기 위해 SQL AntiPattern 의 내용을 정리한다.  
2부에서는 데이터를 효율적으로 관리하는 방법에 대해 알아본다.  

<!--more-->

<br/>

## 10장 반올림 오류 (정수 대신 소수 사용)

정수가 아닌 수를 저장하고 수를 저장해야 하는데,    
산술 연산도 수행하고 그 결과가 정확하도록 관리하고자 한다.  

### 안티패턴: FLOAT 데이터 타입 사용

- 소수 데이터가 필요한 경우, `FLOAT` 데이터 타입을 사용
  - IEEE 754 표준에 따라 실수를 이진 형식으로 부호화
- **필요에 의한 반올림**
  - 십진수로 표현된 모든 수를 이진수로 표현할 수 없음
  - 부동 소수점에 대해 정확하게 저장되지 않고 오차가 발생될 수 있음
- **SQL 에서 FLOAT 사용**
  - 특정 데이터베이스에서는 부정확한 값을 보정해 스스로 의도한 값으로 표시됨
  - 특정 값으로 검색을 해도 조회가 안될 수 있음
  - 합계나 곱을 하는 경우 부동 소수점 수의 누적으로 더 큰 오차가 발생될 수 있음

#### 사용이 합당한 경우

- `INTEGER` 나 `NUMERIC` 타입이 지원하는 것보다 큰 범위의 실수 값을 사용하는 경우

### 해법: `NUMERIC` 또는 `DECIMAL` 데이터 타입 사용

- `NUMERIC`, `DECIMAL` 두 타입은 동일하게 동작
- 컬럼 정의에서 지정한 정도까치 수치를 정확하게 표현
- 스케일 지정 가능
- 유리수가 반올림되지 않고 저장
- 산술 연산을 해도 기대한 값으로 표시됨


